<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D'Films Education & Originals</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Custom Animations */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes zoomIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
        .animate-slide-up { animation: slideUp 0.5s ease-out forwards; }
        .animate-zoom-in { animation: zoomIn 0.5s ease-out forwards; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0a0a0a; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #6366f1; }
    </style>
</head>
<body class="bg-[#0a0a0a] text-white font-sans selection:bg-indigo-500 selection:text-white overflow-x-hidden pb-20">

    <!-- Navbar -->
    <nav class="sticky top-0 z-50 bg-[#0a0a0a]/90 backdrop-blur-md border-b border-white/5">
        <div class="max-w-7xl mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-8">
                <!-- Logo (Secret Button to Exclusive Content) -->
                <button onclick="app.navigateTo('exclusive')" class="flex items-center gap-2 group hover:opacity-80 transition-opacity" title="Click for D'Films Originals">
                    <i id="logo-icon" data-lucide="film" class="w-6 h-6 text-indigo-500 transition-colors"></i>
                    <span class="text-xl font-bold font-serif tracking-widest">D'Films</span>
                </button>

                <!-- Breadcrumbs -->
                <div id="breadcrumbs" class="hidden md:flex items-center gap-2 text-sm text-gray-500">
                    <!-- Injected by JS -->
                </div>
            </div>

            <!-- Back Button (Mobile/Deep Nav) -->
            <button id="back-btn" onclick="app.goBack()" class="hidden flex items-center gap-2 text-sm font-medium text-gray-400 hover:text-white transition-colors bg-white/5 px-3 py-1.5 rounded-full">
                <i data-lucide="arrow-left" class="w-4 h-4"></i>
                <span class="hidden sm:inline">Back</span>
            </button>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main id="app-content" class="pt-10 max-w-7xl mx-auto min-h-[60vh]">
        <!-- Views will be injected here by JavaScript -->
    </main>

    <!-- Footer -->
    <footer id="main-footer" class="mt-20 border-t border-white/5 py-12 text-center text-gray-600 text-sm">
        <p>© 2025 D'Films Education. Empowering students across India.</p>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        /**
         * DATA CONFIGURATION
         */
        const VIDEO_DATA = {
            // The Exclusive Video (Hidden)
            kintsugi: {
                id: "jDNcFXpa18Q",
                title: "Project Kintsugi",
                desc: "A preview of the upcoming short film.",
                credits: "Edited by Dhairya Shah • Generated by Veo 3 & Google AI Studio"
            },
            // The Educational Content
            ncert: {
                class9: [
                    {
                        id: "chapter-1",
                        title: "Weathering the Storm in Ersama (Part I)",
                        videoId: "Ze_Xx4cke_8", // Placeholder until you provide new link
                        duration: "4:11",
                        desc: "The cyclone that hit Orissa in October 1999 killed thousands of people and devastated hundreds of villages."
                    },
                    {
                        id: "chapter-2",
                        title: "The Bond of Love",
                        videoId: "placeholder",
                        duration: "Coming Soon",
                        desc: "Content coming soon..."
                    }
                ]
            }
        };

        /**
         * APP STATE MANAGEMENT
         */
        const app = {
            view: 'home', // home, class, player, exclusive
            selectedClass: null,
            selectedVideo: null,

            init() {
                this.render();
            },

            navigateTo(view, payload = null) {
                this.view = view;
                if (view === 'class') this.selectedClass = payload;
                if (view === 'player') this.selectedVideo = payload;
                this.render();
                window.scrollTo(0,0);
            },

            goBack() {
                if (this.view === 'player') this.navigateTo('class', this.selectedClass);
                else this.navigateTo('home');
            },

            /**
             * RENDER LOGIC
             */
            render() {
                const container = document.getElementById('app-content');
                const breadcrumbs = document.getElementById('breadcrumbs');
                const backBtn = document.getElementById('back-btn');
                const footer = document.getElementById('main-footer');
                const logoIcon = document.getElementById('logo-icon');

                // 1. Handle Navigation UI
                backBtn.style.display = this.view === 'home' ? 'none' : 'flex';
                footer.style.display = this.view === 'exclusive' ? 'none' : 'block';
                
                // Update Logo Color for Exclusive Mode
                if (this.view === 'exclusive') {
                    logoIcon.classList.remove('text-indigo-500');
                    logoIcon.classList.add('text-amber-500');
                } else {
                    logoIcon.classList.add('text-indigo-500');
                    logoIcon.classList.remove('text-amber-500');
                }

                // Render Breadcrumbs
                this.renderBreadcrumbs(breadcrumbs);

                // 2. Render Main View
                container.innerHTML = '';
                
                if (this.view === 'home') this.renderHome(container);
                else if (this.view === 'class') this.renderClass(container);
                else if (this.view === 'player') this.renderPlayer(container);
                else if (this.view === 'exclusive') this.renderExclusive(container);

                // Refresh Icons
                lucide.createIcons();
            },

            renderBreadcrumbs(el) {
                if (this.view === 'exclusive') {
                    el.innerHTML = '';
                    return;
                }

                let html = `<button onclick="app.navigateTo('home')" class="hover:text-white transition-colors flex items-center gap-1"><i data-lucide="home" class="w-4 h-4"></i> Home</button>`;
                
                if (this.selectedClass) {
                    html += `<i data-lucide="chevron-right" class="w-4 h-4"></i>
                             <button onclick="app.navigateTo('class', ${this.selectedClass})" class="hover:text-white transition-colors ${this.view === 'class' ? 'text-white font-medium' : ''}">Class ${this.selectedClass}</button>`;
                }
                
                if (this.view === 'player' && this.selectedVideo) {
                    html += `<i data-lucide="chevron-right" class="w-4 h-4"></i>
                             <span class="text-white font-medium truncate max-w-[200px]">${this.selectedVideo.title}</span>`;
                }
                el.innerHTML = html;
            },

            /**
             * VIEW 1: HOME (Tile Layout)
             */
            renderHome(container) {
                let gridHtml = '';
                
                // Generate 12 Class Tiles
                for(let i = 1; i <= 12; i++) {
                    const isClass9 = i === 9;
                    const isActive = isClass9; // ONLY Class 9 is active
                    
                    // Styling logic
                    const activeClasses = "bg-gray-800/50 hover:bg-gray-800 border-indigo-500/30 hover:border-indigo-500 shadow-lg shadow-indigo-500/10 cursor-pointer transform hover:scale-[1.02]";
                    const inactiveClasses = "bg-gray-900/20 border-white/5 opacity-30 cursor-not-allowed grayscale";
                    
                    const clickAction = isActive ? `onclick="app.navigateTo('class', ${i})"` : '';
                    const dotHtml = isClass9 ? '<span class="absolute top-3 right-3 w-2 h-2 bg-green-500 rounded-full animate-pulse shadow-[0_0_10px_#22c55e]"></span>' : '';
                    const statusText = isActive ? '<span class="text-[10px] text-green-400 font-mono mt-1">Available Now</span>' : '<span class="text-[10px] text-gray-600 font-mono mt-1">Coming Soon</span>';

                    gridHtml += `
                        <button ${clickAction} class="relative p-6 h-32 rounded-2xl border transition-all duration-300 flex flex-col items-center justify-center gap-1 overflow-hidden ${isActive ? activeClasses : inactiveClasses}">
                            <span class="text-xs font-bold ${isActive ? 'text-indigo-400' : 'text-gray-500'} uppercase tracking-wider">Class</span>
                            <span class="text-4xl font-bold text-white">${i}</span>
                            ${dotHtml}
                            ${statusText}
                        </button>
                    `;
                }

                container.innerHTML = `
                    <div class="animate-slide-up">
                        <div class="text-center mb-12">
                            <h1 class="text-4xl md:text-5xl font-bold mb-6 font-serif text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-indigo-600">Learning Library</h1>
                            
                            <!-- Personal Note Card -->
                            <div class="max-w-xl mx-auto bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-5 mb-8 text-left flex gap-4 relative overflow-hidden">
                                <div class="absolute top-0 left-0 w-1 h-full bg-indigo-500"></div>
                                <div class="shrink-0 bg-indigo-500/20 w-10 h-10 rounded-full flex items-center justify-center">
                                    <i data-lucide="user" class="w-5 h-5 text-indigo-400"></i>
                                </div>
                                <div>
                                    <h3 class="text-indigo-200 font-semibold text-sm mb-1">Developer's Note</h3>
                                    <p class="text-indigo-200/80 text-sm leading-relaxed">
                                        Hi! I'm currently in <strong>Class 9</strong>, so I'm building this website as I study. 
                                        I'll be adding videos for Classes 9-12 first. Stay tuned!
                                    </p>
                                </div>
                            </div>

                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 px-4 max-w-5xl mx-auto">
                            ${gridHtml}
                        </div>
                    </div>
                `;
            },

            /**
             * VIEW 2: CLASS LIST (Chapter List)
             */
            renderClass(container) {
                const videos = this.selectedClass === 9 ? VIDEO_DATA.ncert.class9 : [];
                
                let contentHtml = '';
                if (videos.length > 0) {
                    videos.forEach((video, idx) => {
                        const isLocked = video.videoId === 'placeholder';
                        
                        // Thumbnail Logic
                        const thumb = isLocked 
                            ? `<div class="w-full h-full flex items-center justify-center text-gray-600 bg-gray-900"><i data-lucide="lock" class="w-6 h-6"></i></div>`
                            : `<img src="https://img.youtube.com/vi/${video.videoId}/mqdefault.jpg" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity"><div class="absolute inset-0 flex items-center justify-center"><i data-lucide="play-circle" class="w-10 h-10 text-white opacity-90 group-hover:scale-110 transition-transform shadow-xl rounded-full bg-black/50"></i></div>`;
                        
                        const clickHandler = isLocked ? '' : `onclick="app.loadVideo(${idx})"`;
                        const cursorClass = isLocked ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer hover:bg-gray-800 hover:border-indigo-500/30';

                        contentHtml += `
                            <div ${clickHandler} class="p-4 rounded-xl border border-white/5 bg-gray-800/30 flex gap-4 transition-all group ${cursorClass}">
                                <div class="w-32 h-20 rounded-lg flex-shrink-0 relative overflow-hidden shadow-lg border border-white/5">
                                    ${thumb}
                                </div>
                                <div class="flex-1 py-1 min-w-0">
                                    <div class="flex justify-between items-start mb-1">
                                        <h3 class="font-semibold text-white truncate pr-2">${idx + 1}. ${video.title}</h3>
                                        <span class="text-[10px] font-mono text-gray-400 bg-gray-900 px-2 py-1 rounded border border-white/5 whitespace-nowrap">${video.duration}</span>
                                    </div>
                                    <p class="text-sm text-gray-400 line-clamp-2">${video.desc}</p>
                                </div>
                            </div>
                        `;
                    });
                } else {
                    contentHtml = `
                        <div class="text-center py-20 bg-gray-800/20 rounded-xl border border-dashed border-gray-700">
                            <i data-lucide="book-open" class="w-12 h-12 text-gray-600 mx-auto mb-4"></i>
                            <h3 class="text-xl text-gray-400 mb-2">Content Coming Soon</h3>
                            <p class="text-gray-500">We are currently uploading videos for Class ${this.selectedClass}.</p>
                        </div>
                    `;
                }

                container.innerHTML = `
                    <div class="animate-fade-in max-w-4xl mx-auto px-4">
                        <div class="flex items-center gap-6 mb-8 p-6 bg-gradient-to-r from-indigo-900/20 to-transparent rounded-2xl border border-white/5">
                            <div class="w-20 h-20 rounded-2xl bg-indigo-600 flex items-center justify-center text-3xl font-bold text-white shadow-lg shadow-indigo-600/20">
                                ${this.selectedClass}
                            </div>
                            <div>
                                <h2 class="text-3xl font-bold text-white">Class ${this.selectedClass} English</h2>
                                <p class="text-gray-400 mt-1 flex items-center gap-2 text-sm">
                                    <i data-lucide="book" class="w-4 h-4"></i> NCERT Curriculum • Beehive & Moments
                                </p>
                            </div>
                        </div>
                        <div class="space-y-3">
                            ${contentHtml}
                        </div>
                    </div>
                `;
            },

            loadVideo(idx) {
                const video = VIDEO_DATA.ncert.class9[idx];
                this.navigateTo('player', video);
            },

            /**
             * VIEW 3: PLAYER (Video Focus)
             */
            renderPlayer(container) {
                container.innerHTML = `
                    <div class="max-w-5xl mx-auto px-4 animate-fade-in">
                        ${this.getBlurryLoaderHtml(this.selectedVideo.videoId, this.selectedVideo.title)}
                        
                        <div class="mt-8 bg-gray-900/50 p-6 rounded-2xl border border-white/5">
                            <div class="flex flex-col md:flex-row justify-between items-start gap-4">
                                <div>
                                    <h1 class="text-2xl font-bold text-white mb-2">${this.selectedVideo.title}</h1>
                                    <p class="text-gray-400 leading-relaxed text-sm">${this.selectedVideo.desc}</p>
                                </div>
                                <button onclick="navigator.clipboard.writeText(window.location.href)" class="shrink-0 px-4 py-2 bg-white/5 hover:bg-white/10 rounded-lg text-gray-300 hover:text-white transition-colors flex items-center gap-2 text-sm font-medium">
                                    <i data-lucide="share-2" class="w-4 h-4"></i> Share
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                this.initBlurryLoader();
            },

            /**
             * VIEW 4: EXCLUSIVE (Kintsugi)
             */
            renderExclusive(container) {
                const kintsugi = VIDEO_DATA.kintsugi;
                container.innerHTML = `
                    <div class="relative min-h-[70vh] flex flex-col items-center justify-center text-center animate-zoom-in">
                        <!-- Gold Accents -->
                        <div class="absolute top-0 left-0 w-64 h-64 bg-amber-500/10 blur-[100px] rounded-full pointer-events-none"></div>
                        <div class="absolute bottom-0 right-0 w-64 h-64 bg-amber-900/10 blur-[100px] rounded-full pointer-events-none"></div>
                        
                        <div class="inline-block px-3 py-1 border border-amber-500/30 rounded text-amber-500 text-xs tracking-[0.3em] uppercase mb-6">
                            D'Films Original
                        </div>
                        
                        <h1 class="text-5xl md:text-7xl font-serif font-bold mb-8 text-transparent bg-clip-text bg-gradient-to-br from-amber-200 via-amber-500 to-amber-700 drop-shadow-sm">
                            PROJECT KINTSUGI
                        </h1>
                        
                        <div class="w-full max-w-4xl mb-8">
                            ${this.getBlurryLoaderHtml(kintsugi.id, kintsugi.title)}
                        </div>

                        <div class="max-w-xl mx-auto text-sm text-gray-500 space-y-2">
                            <p class="uppercase tracking-widest text-xs text-amber-500/70">Credits</p>
                            <p>${kintsugi.credits}</p>
                        </div>
                    </div>
                `;
                this.initBlurryLoader();
            },

            /**
             * HELPER: Video Component with Blurry Loader
             */
            getBlurryLoaderHtml(videoId, title) {
                const thumbnailUrl = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`;
                return `
                <div class="relative w-full aspect-video bg-gray-900 rounded-xl overflow-hidden shadow-2xl group border border-white/10">
                    <!-- 1. Blur Layer -->
                    <div id="loader-layer" class="absolute inset-0 z-20 transition-opacity duration-1000 ease-in-out bg-black">
                        <div class="absolute inset-0 bg-cover bg-center blur-xl scale-110 opacity-40" style="background-image: url('${thumbnailUrl}')"></div>
                        <div class="absolute inset-0 flex flex-col items-center justify-center text-white">
                            <i data-lucide="loader-2" class="w-10 h-10 animate-spin text-amber-500 mb-4"></i>
                            <span class="text-sm font-medium tracking-widest uppercase opacity-80">Loading Video</span>
                        </div>
                    </div>

                    <!-- 2. Iframe -->
                    <iframe 
                        id="video-iframe"
                        class="w-full h-full relative z-10 opacity-0 transition-opacity duration-700"
                        src="https://www.youtube.com/embed/${videoId}?rel=0&modestbranding=1&onload=1" 
                        title="${title}"
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                    </iframe>
                </div>`;
            },

            initBlurryLoader() {
                const iframe = document.getElementById('video-iframe');
                const loader = document.getElementById('loader-layer');
                
                if(!iframe || !loader) return;

                // When iframe loads, fade out loader
                iframe.onload = () => {
                    // Small artificial delay to make it look smoother
                    setTimeout(() => {
                        loader.style.opacity = '0';
                        loader.style.pointerEvents = 'none';
                        iframe.style.opacity = '1';
                    }, 800);
                };
            }
        };

        // Initialize App
        document.addEventListener('DOMContentLoaded', () => {
            app.init();
        });
    </script>
</body>
</html>
